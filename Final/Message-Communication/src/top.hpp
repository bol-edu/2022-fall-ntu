#pragma once
#include "common.hpp"
#include "qoi.hpp"
#include "polar_code.hpp"

const float gaussian[1024] = {0.2979853261108576, 0.5604049283335469, -0.9074131084187845, -1.1429490778151004, -0.7373696874262847, 0.3731531067064567, -0.2271724049063413, 0.48790251965441206, -0.019512696198118254, -0.4368419172765869, 1.126021974372346, 0.2985016689044582, -1.4446413548187926, -0.10298747995766223, 1.6956797636035328, -1.1378199225656411, -1.2291213281943532, 0.0019319716824848984, -1.005441920719042, -0.4693503955962933, 1.2605692872078618, -0.5633507214708326, 0.22204106209820482, -0.5355298168326574, -0.37526917808003185, -0.403969932030626, 0.860502161665241, -0.6183728419167985, -0.2746911889286167, -0.3880352458818473, -2.3448704570487737, 0.9674968442673137, 0.6468613518633334, -1.1360042571330606, 0.7867291840159474, 0.05328407783579416, 0.10637319628510074, -1.1678176866224361, 0.9333348407229074, -2.3434680412243507, -0.9728532734927563, -0.4437903566920635, 0.2830289018535659, 0.826056688362437, -0.19632003797426756, 0.2030329676280668, -0.6756435248328, 0.4546689574816734, 1.292578844192143, -2.76536936220463, -1.3938665224821256, 0.03157248793435563, 1.2269387840541575, -0.32449981194298644, -0.23551923448698397, 1.0840349144363146, -1.735877173078605, -1.0374988246784083, 0.14488557706219857, -1.1987591270757372, 2.056871159755715, -0.8783378209424284, -0.13838655987848736, -0.8408619664705748, -0.4139650711017072, 1.9700965897687295, -2.076646192019412, 0.2919649861732084, 0.7040745805081072, 0.7166574340772999, -0.9403324067939297, -0.025112152726465286, 1.956729846241254, -0.21401226277328395, 0.45578457298308556, -1.715921087887638, 0.19911063122535538, -0.1659460481059225, -0.20600164348825836, -0.6876916276314172, -0.28348668012860784, 0.708225047976386, -0.6922836868350571, 0.2602745510452482, -0.6103080551788648, 1.2403334644265818, 1.0122816879661443, -1.4606595211482662, -0.38171347608351147, 2.240235542458666, 0.9471481798553908, 0.7171950863297492, 0.151375022280121, 1.3694014331768676, 2.1916168393597264, 2.409363639195587, -0.18537590227632542, -0.416178494535292, -0.33362659456432614, 1.5039927357179887, -0.7180272715522868, -0.09731879682728534, -0.3721806530869411, -1.498061396633827, -0.8432611065564386, 0.41574114926187133, -1.2394781586637857, -0.06723838373901476, 0.5994766740383061, 0.6251623832828392, 1.3343733413422152, 0.012756552792442121, -0.5680050511253616, -0.08126196878516902, -1.2389900867397095, 0.9559179308497975, 1.2276804628759361, 1.3421307641168108, -1.8977209472687648, 1.9089392525959334, 0.7331983561898056, -0.20973681943339287, 0.1880423606061782, 0.7722619864084842, 1.578990888488757, 2.568945612190566, -0.6755506953946916, -0.4748654868356201, -0.05658704444683375, -0.5423735210290341, -0.7511807132877478, 0.4568693275649082, 0.21546942381291048, -0.06909309906244518, 2.5218366596725397, 0.8667704004230377, 1.7776787436429695, -0.1068673665907931, 1.5773499840161838, 0.3031836399014985, -0.744582299760808, -0.5009523959824422, 1.1378156137464583, 0.8530885174407385, 0.4191145985129496, -0.09132376689362695, -1.1301076727345103, -0.1478535984175916, -0.6668456136830467, 0.6334431230313295, 0.6102047719310967, -0.26016551382392483, 0.4052531786092457, -0.060885347341410906, -0.1726114365975133, 1.3269796968624687, -0.9197618414851322, 0.6043881640496913, 0.426567888791594, 1.7824870485333943, -1.0764301893396575, 0.5259102362616667, 1.5521304631266637, 0.8666650944520843, 2.549512285104219, -1.1893967058985164, 0.6148995929113159, 0.6331984703329507, -0.36562174062590447, 0.7563983180041737, -0.33176678060933423, 0.01596994799695456, 0.3513936107909605, -0.7189362605207086, -1.182585229825704, 0.970955897287322, -0.3335230678751383, -0.6463832955958942, 1.46823088236239, 0.5631976757107311, 0.9768579506473136, 0.22092314133543578, -2.0538130194283952, -0.24067706462380736, -0.041672412844720494, -0.6468134862152267, 1.3507851788653278, 0.3436578373884256, 0.690288840076008, 0.7703291449924523, -0.35724157966779174, 1.3505170315461257, 1.4045122494968185, 0.41734356525053246, -0.6013344059502019, 1.1231032836808992, 0.3505504851529924, 1.0423196179753613, -1.1415501032796345, 0.10505382749874921, 0.7412355133373201, 0.43927316962978863, -1.9466947309901095, -0.993956029539532, 0.1795069903892818, -0.3105755364049458, -1.7844975556681701, -0.4492518451516944, -0.48350007121564387, 2.207324352885936, 1.5645958105723003, 0.07410365592779578, -1.4889301032619051, -0.7175609604623261, -0.9446963517946594, -0.03688654357281966, 0.4023681179802489, -1.3099138372809087, -1.5735602271154536, -1.7317481383367088, 0.5698320106407402, 1.0493733928762625, 0.5714215146134639, -0.3422363650311127, 0.15500420646524965, -0.8934126237830181, -1.0719688274396126, -2.097798565494072, -1.0888799755428198, -0.21823959725671424, -0.6227049478162525, 0.5183044208669132, 0.5796632537974863, -0.8480589774150389, -0.14944457752608956, -0.6685118864051031, -0.7736319260365274, 1.7820707389758976, 2.2799147745154436, -1.2385966651976597, 0.5630847802181458, 0.07792523308769471, -0.15733199410097734, -0.2683351962396345, 1.1983351080040985, 0.4952873358589419, -0.5440920107404971, 0.11586277279296311, 0.4390451191043723, 0.23832763210666547, 1.9692176428482635, -1.3773141977671561, 0.6694501548504029, -1.3715398100625527, 0.6135449372788742, 1.0952578677755183, 0.07919865149119057, 0.8925034457266471, 0.015727352432027646, 1.1328845780432284, 2.052080614122486, 0.019000993083608864, 1.6395480808231366, -0.5675128183677112, 0.8811085657788386, -0.19893373315845006, 0.437788180118081, 0.1352945103995957, -0.16418786814054961, 1.2835799143587752, 0.8214712437355086, 0.5198047789407028, 0.45183908938347006, -1.0480134843159872, -0.9574716830175004, -2.2940065614570924, -0.7432031689679575, 1.075122941753713, 0.565614519735247, -0.3697402107309767, 1.4051480952630615, 0.5359655772371896, 1.0292806829616763, -1.148077841972814, 1.389301723365693, -0.9531048198353677, 0.2897295246801803, 1.3220850504494448, 1.0644126440163344, -1.3635619873285085, -0.9024935730964483, 1.0069169470421484, -1.2536014118727674, -0.34271165612099724, 0.5209212602864224, -0.2137798176296914, 0.4413004960453961, -0.41979515732800043, 0.40603168323148464, -0.7122056573795605, -0.15121337895688497, 1.4268337591064493, -1.5742578411558759, -0.5575756222904429, -0.8923123344481618, -0.09370267410543327, -0.5650756613162567, 0.8665179796438733, -0.5140800866429526, -1.1827105486121179, 1.0811613911793674, -0.3120725784969765, 0.3685716520366954, 0.5130030464582584, 0.4882320762548388, -1.4558370339078321, -1.184180572368448, 1.843683395716043, 2.3382674224199778, 1.395744270148616, -0.7450245763051665, 1.0413029940988983, 0.900462575045831, 0.2846647907944238, -0.7160115053362605, 0.9080567341612088, 0.8177882765145427, -0.6491514607594719, -2.5846782720168898e-05, 1.068351987179612, 0.24878586898706087, -1.2684625279839876, -0.29950355386956284, 1.7954948414905187, 0.6773633681758272, 0.8036070079899444, 0.7331059872598567, 1.515090283996972, -2.476175076958601, 0.1801770799152092, -0.7719138612936188, 0.5704387503168885, -0.6381691706016673, -0.8485480289217392, 0.8797952113195346, -0.15363787629461823, -0.6278508357770776, -1.1720058869650423, -0.05406339735520032, 0.09268176573665804, -0.4098624384452098, -0.6705985231844749, -0.3456203010684184, -1.25298320549364, 0.4060963914628588, -1.1207337203323207, -0.24535393845096104, 0.9567159589355231, 0.4394927044836937, 0.05492510665749588, 1.6045852874591717, 0.30429778067758484, -0.12028885897730617, 0.24309887987480436, 0.2656242770077704, 0.5098942962809507, 0.849247206103637, -1.3688160715742088, -1.0985375209421335, 1.5216143335646686, -0.09652756873234193, -0.5229277297842647, 0.18111540593155515, -1.7540955414681183, -0.12642392349473933, 0.28547334990188983, 0.11656934552162895, -0.8392120928081661, -0.5032578906561602, -0.4056920126993822, 0.9215283733918128, -0.945109649128269, -1.00834769348217, 0.40806105672345094, 0.5498917515555682, -0.36125945085800726, 1.6761646060711441, -0.36996500857671083, -1.5047759724216243, -1.3105488152644966, -1.0782193004312164, -1.7260474137276676, -0.9068702386682591, 1.5539526892240427, -1.47994232793498, 0.10870719952212331, 0.5933180889609312, -0.10552408074194981, -1.8255303886723342, 0.9374683492100162, 0.7366461361663749, -0.20829044465126273, -0.43784709192111626, -0.048021339188877014, 0.05397523522847503, -1.0050056539595396, 2.0112331349467922, -1.4624288721257268, 0.05754183446545886, -1.2078479914564286, -0.4349670868941156, -0.2083692804777808, 0.8810433447998544, 0.8059225066457637, 0.4385283272318352, -0.6568930914251604, 0.3370969660945312, 0.9721423234949585, -0.16967669474314034, -0.06404814516177604, 0.255457204704926, 1.0933118011832155, 1.3389365294695557, 0.02859143045564076, 0.8169938164680579, -1.045808473530777, -0.5999908279478828, -2.0522021453434642, 1.8004511567851083, -0.4387970000033517, 0.03315097603938598, 1.4681280504679144, -0.1996005710056039, -0.6060149308453764, -0.6082150472182839, 0.6032840667147468, 0.04566671108323177, -0.013787540896082496, 1.1079856207643737, -0.5863342798469839, -0.49768614612552653, 1.01779928036799, 1.6049417450699914, 1.0062987189015655, -1.051354209414544, -1.1587270074305271, -0.31326387367552927, 2.443970339409424, -0.06980998926689667, -1.4157033667520393, 0.0785741492653628, -0.38827978715385386, 0.4967006643787349, 0.5460691037780444, -0.6235993926538018, 0.18091595271712396, -0.34880276325252413, 1.0327077372732176, -0.178268549280344, -0.8474832058432, 0.09799820760525317, 1.8107860144958159, -0.5246854974076571, 0.8429454359489984, -1.7595521938448353, 0.026626154484148404, -0.40401668873524715, 3.3806028932910115, 0.6034792126254691, -0.06618461031249044, 0.9286011410093059, -1.1300155094519295, 0.09107334088263018, -0.29709876937627283, 0.939275728228659, 0.31231755059481847, 0.0017117593760911185, -1.78240908133103, 0.09848263351599888, 1.2248664956420723, 0.2689633355961919, 0.7682006606138575, -1.5460534597522606, 1.1526803710961229, -0.23840711078470955, -1.29687146153843, 0.11147954283094579, 0.252103494126148, -0.6237978757646395, -1.5706648950616655, 0.04087044023088366, 0.3603804644537202, -2.6096012151658474, 0.24938900599301872, -1.7961114868794834, 1.4878359583507939, 1.5393081814102134, 1.7396435807309836, -0.47767442027005447, -0.07909001785631534, 1.1722976956186688, 0.11924154931911685, -0.5354174860799233, 0.20062366578058644, 0.17757542761679312, 0.5923450385211538, -0.652904455578305, 1.2848478373403596, 0.788293035457469, -1.379176113346865, 2.69809674537015, 1.1860696545665623, 0.9557595879286122, 1.3776408596526628, 1.1440342963597083, -0.5118352912124595, 0.8964385809772949, -1.0207195201163082, -0.9208265997573981, -0.5799108509650701, 0.7493408152343003, -0.4914247980850139, -2.0786995576719236, -1.3468379401452846, -0.4276134842063218, 0.4157051933473156, -0.33482080776833784, -0.3865572165081157, -0.8799281016435535, -0.3504982767029737, -0.6990211098509834, -0.4997750745864396, 0.25252774330746985, -1.5953807944481895, 0.017202528726058184, 1.6211949896282931, -0.8502621353978922, 1.2405019920614166, 0.8801300565731472, 0.21395512192441982, -0.5987020883979007, -0.010269650651127555, 2.2984529687462576, 0.941181494059943, -0.28613751244313207, 0.6933790052385622, -0.023450876215434718, -0.2082034543654743, -2.2720139643141226, 0.16535305101229292, 0.34512302031146713, -0.38863396650859255, 0.04921498868417738, 0.7383970572049767, -1.11208691570145, -0.7087686151597347, -0.45979255348488085, -0.09620279179834239, -1.298285111625259, -0.9774661384160198, 1.881070519742042, -0.04123686926543676, 0.8147277673488806, -0.7000817449594496, -0.4258929215290008, -0.442229167811698, -1.3445749521929182, 1.2067400834022624, -0.9348543701186265, 0.3348342880492362, -1.8307776428621103, 0.09030584684026167, -0.3708773827707953, -0.3457029367542961, -0.5520603969618076, -0.19761099478965805, -0.983925380481409, 0.9644680319286009, 0.3116840814554668, 0.3954014694487287, -0.07092020452971178, 0.6040362368952495, 0.09627592272702493, 0.2445756474169718, -0.8285123299963765, 1.4879520433835407, 1.5156097981960825, -0.8786342634400841, 1.1255548910068631, -2.250025750261154, 0.7459028730783716, 0.7459292086686335, -0.3734531759390271, -0.618816107396072, -1.0353985251647235, -0.7698153948924026, 1.2216175633763546, -0.7917873951157589, -1.5729340115463164, 1.2771016775067996, -1.2918403990309628, -0.016491836880746045, 1.1797539589268482, -0.7901661664591617, -0.8076423548515604, -0.8505550882450127, 2.330961118604466, 1.0209813475435463, 0.7003149787428566, 0.7177698836857586, -1.6231262135382845, 1.2921466742001093, 0.2764639583036347, -0.4342715712716449, 1.6006726537395712, -1.5893760776866486, 0.3081219999344513, 0.02886172495664874, 0.41258565963359073, -0.6707922493343792, 0.5336544215926884, -1.1611266090202603, -0.8289206379029276, -0.24191161394333838, -1.1736791275315615, 0.6144559640983587, -0.46087638008180587, 1.8335922109303773, 1.143989496283263, -1.5664245422476875, 0.1606041174362247, -0.0872845148482045, -1.489814022210685, -0.530246872082531, 0.5310925383993518, -0.2383633179694576, 0.3517590876860313, -0.06930418058862604, -0.25111640901578763, 1.4562921729213938, 0.4878295189954454, -0.43068361301058355, 0.6922016781673606, 0.8243368276773899, -0.13751589480706924, 0.17431491309843344, -1.1403146858997715, -0.7823100930243251, -0.3925056808211611, 0.703566026741816, 0.7678887918892108, -0.7695983864211062, -1.5632312435900475, -1.0073829772561274, 1.3548425075047177, -0.9306484683338682, 1.511931567011989, -0.33339276455492206, -0.8445292475618124, 0.21245603362373924, -0.749984087010838, 0.5957450886993673, 1.061172562693367, 0.9293764994952118, -0.012201252905496715, -0.019631833173048237, -0.7319438565672821, -1.0596241050413144, -0.6893951727266192, 0.6878728767237104, -0.6827039312386731, -0.3676120951518282, -0.5969229642706025, -0.025354534382208367, -0.9264387994604814, -0.2571269073591803, -1.715386098613276, 0.9807744078973271, -1.031253406103204, -0.3466297586367388, 0.4491409472723298, -1.0171297387404656, 0.10653693355332049, 0.3359006266082311, 1.3392933204280837, -0.7839647612729974, 0.9569300595028174, 0.8968628097681205, -0.7962220758221998, 1.3484584527630024, -1.2949674416579504, -0.6302290799954555, 0.845263543400429, -0.5841635369879291, -0.01655518084946786, -0.5853648627485333, -2.2367454837637726, 1.6197353501860463, -0.5820450881775483, 0.2827881383434078, 1.565396777926783, -1.3067840703854574, 1.3687431842597897, -0.03690707959150761, -0.4895312036550828, 1.2105383325389458, -0.6501313770944315, 0.7634796231972611, -3.6583017591088334, 0.09323871212670026, -0.9755403749248349, -0.15797895006378587, 1.6654866477551793, 0.32437930397923664, 0.19946676379659944, 1.3556853628449361, 0.8412684579922955, -1.4068654217208412, 0.3032724487283994, 0.8338080011412472, 2.759970136219721, -0.2491930448816638, -1.8435701618762936, 1.0572318606485667, -0.6045088772876902, -0.34529275063252446, 0.9976858169350663, -1.3452892006949013, 0.06479409362293777, -0.15621817053917625, -2.2205026190645065, -0.6111089965276835, -0.8485259974777256, 2.0189007216118755, 1.038453894092266, 0.1700260674469029, -1.6459993059208509, -1.0956762093778838, 0.06530000528575305, 0.46697612948886574, -0.487506965360572, 1.1548966200213913, 0.2646655755012287, -0.7065849718574754, 1.1394241702238452, 1.9081206827501913, 1.497674005957722, 0.6425295189016278, 0.7936753495677153, 0.4601633327233408, -0.18629277107762282, -0.9630131306711007, -0.8420643083272866, 0.6472672375244972, 0.1500245648124506, 1.5281693384230286, 0.7717538482250046, 2.1830104247732742, 1.2784890828085893, -0.8810735059511012, 0.7504162851897663, -1.6030982193518002, 1.6677988517984332, 0.4288008902614402, -1.416375158958244, 0.2511797378310899, 0.7147490654230692, 0.2953215385566097, 0.39810395883459804, -1.1970964179811665, 0.8250372873182577, 1.0240558731628384, -1.112205782222052, -0.8746765725973309, -0.6151253748384214, 1.8553422878775732, 2.009926818255318, 0.8749837838035495, -0.2735483036937138, -0.9754267573537792, 0.9664221247819451, 0.4593075049491948, -0.7131481017771064, 0.7996533858939144, -0.00231210099222187, 1.0244864976657395, -0.661545324801351, 1.518918717258531, -1.617981413402766, 1.5001089850190605, 0.26483328016532526, 1.7613431083467066, 1.8126874890628457, 0.5664712971184317, -0.11672195909921575, -0.5046707114803956, -0.4363888385739993, -1.803097180320786, -0.7439737485874476, -0.814256652044065, 1.7303482990400734, -0.6409796997861488, -0.4021826073990944, -0.2876341742329688, -0.20284995771398864, -0.07678806972553404, -1.6176722073640315, -1.2638717490520175, 0.04900596111318869, 0.3282457503280595, 1.886088655598505, -2.544330754527071, -0.21303214373488819, 0.20239915884482523, -0.5783692662162688, -0.23126317263318566, -0.07071673148887354, 0.560540486838954, -1.7817099124149771, 0.1507097792571781, 0.7185978058123556, 0.7014632690279594, -0.22515811364018157, -0.9098338395540895, -1.122703677171246, -1.132023317258849, -0.28881923973487217, 1.8894903809831358, -0.29463107262917576, 0.6502335989318154, 0.8668456469730591, 0.7845933600798807, 0.5914393201655137, 0.8930017384697553, -1.3396663882404067, -0.06502467897721745, -1.020512543107451, 1.2104386397639888, 0.8936770013482835, -1.4393275832478571, -0.1213086956595334, -0.7852125132572538, -0.1633975636049175, -0.016012300791610784, -0.23602370000863052, -0.24076285861495628, -0.7086979248185469, -2.2497019822558686, -0.9046022920040303, 2.0991104260096893, -1.1254442860843117, 0.8755793009202156, -0.38603022165668954, 1.743189332454879, 0.6349171095838294, 0.6796166378726145, -0.028197836975046457, 0.3550823221468487, -0.3954261114169887, 0.7309901985189734, -0.9651204555163845, -1.54416319451444, -2.149099447376466, -2.42099777012999, 0.20988294458983386, -0.3615230077281132, 1.093780394997752, -0.8169068119814975, -1.0267753332611462, -1.0189049551554368, 1.892372978867324, -0.3129005459383003, -0.6512845150531948, 0.24517338922352364, 0.12977534456417406, 0.46122144103813395, -0.11762654131511427, -0.09892023777354896, 0.6580204790867381, -0.4265719647970107, -1.279476657641982, 0.8730327707921929, 0.3334190116010293, 1.8321736145986804, -0.49004420512617286, -0.4031106294469172, 1.3268389640848863, 2.1652017526308027, 1.0333224308938858, -0.8847836144120714, 0.27551147805279447, 1.2965038781154752, -0.8751828995617902, -0.803604391370794, 0.7958009508989422, -0.007485046882826757, -0.5960608166728271, -0.29765809417218486, -1.2564729362682776, -0.06374733789166918, 0.9881466985825761, -0.10544059991583422, 0.13746538347879725, -0.22549456615317984, -1.6897298174946966, 1.5009594310700471, -0.4525111722288978, -0.6483228669642944, -0.7607161496134812, 2.0655183144402565, 0.02498183041481877, 0.17815664016437444, -1.2401413643162231, 0.5969945837965113, 2.4063806413786932, 1.2242147386824656, -1.2305829544591516, 0.42690167352381636, -1.8763772156864948, 0.1945076368521224, 0.4993524676866592, 0.36500909992160846, 0.8317632947811867, -1.5048192115972607, -0.38889553959794804, 0.020342164025444108, -1.728041155297137, -1.2364602641458082, -0.5446787339744372, -0.4640893889971618, -0.5457190841495653, -1.4347378879166177, 0.03695801521755377, -0.8909574985225802, -0.4758824579895441, 0.4184999097188666, -0.44496675460210466, 0.6372818235825748, 0.27436415250380025, 0.6961321266591385, 0.6309429879974707, 0.32674299600661805, 0.22091195907194702, 0.13029019901389594, 0.4205760178861566, 0.22350713371360603, -1.1898226770725733, 0.3868813524107311, 1.523167956963707, 0.15193767637332273, 0.3170109299533545, 0.5035995752321791, 1.7013847357018157, -1.119828036910393, 0.584926721007454, -1.3908111423720138, 1.0970350003354754, 0.27118999795726106, -0.15809434080510035, -1.531135893079381, 0.9496448962630823, -0.21251969224358738, -1.2064971064692864, -0.575157240776182, -0.9302711168800266, 0.8982993500014987, -1.7311272506126203, 0.20860618608224912, 0.30343532263199136, 0.3790809355187834, -1.3979243895367737, -0.1832892512504636, -0.5994302531940292, -0.05537348798841937, -0.35902552808881394, 0.5061936464055274, 0.12691799022805375, 1.235710205438392, 0.1360076331290297, 1.835518561164419, -0.5665535032053831, -0.5848616345195113, 1.0386013518639994, 0.43551143654411967, 0.18600281776356106, -1.1134588185392742, -1.0397589049752172, 0.6468055184573814, -0.30166922369061416, -1.0571455173440336, 0.36615459940923795, 1.4249363574050433, 0.16333677636663588, -0.5502924734794165, 0.28836673049491784, 0.6230908291638392, 2.593066734604402, -2.2752751103115565, 0.6161781688281092, 1.6424582831229586, 0.1579515440102613, 0.14591352511850048, 0.47400866145843334, -0.21335855514658067, 1.6691776107230978, -1.4007243824772646, 0.22077318268703075, -0.9704062267506984, -0.5222156052291562, 0.38938825904473656, 0.5442057104069097, -1.4907423515948892, 0.4823786280177171, 0.5664941413995987, 1.2980746376650452, -0.11884438047219037, -1.909581188451567};
//void top(Byte in[BUF_SIZE], unsigned int width, unsigned int height, Byte out[BUF_SIZE]);
void top(Byte in[BUF_SIZE], float SNR, Byte out[BUF_SIZE]);
